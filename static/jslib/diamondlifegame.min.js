function CreateLifeGameInitialSVG(r,e,n,t,o){var l=HEX_TO_U8ARY(r),a=U8ARY_TO_BITS(l),i=0;function c(r){var e=l[i];return i++,e%r==1}var f=0;var u="black",v="green",s="rect",g=!1,p=!1,y=!1,d=!1,h=!1;c(11)&&(s="circle"),c(11)&&(s="rhombus"),c(41)&&(s="cube"),c(21)&&(v="#cd0b20"),c(21)&&(d=!0),c(41)&&(y=!0),c(11)&&(g=!0,"rect"==s&&(s="rectcor")),c(11)&&(p=!0),c(11)&&(u="silver"),c(21)&&(u="none"),c(41)&&(u="#daad7b","green"==v&&(v=n)),c(41)&&(h=!0);var b=t?0:10;u=o?"none":u,h&&(u=n||"#fff");var m=[],w=p?' rx="20" ry="20" ':"";function x(r,e,n,t,o,l,a){var i="",c=b+10+10*l,u=b+10+10*a,s=c+5,g=u+5;switch(e){case"cube":var p=c-4+","+(u-4),y=c+4+","+(u-4),d=c-4+","+(u+4),h=c+4+","+(u+4),m=c+8+","+u,w=c+8+","+(u+8),x=c+","+(u+8);r.push('<polygon points="'+y+" "+m+" "+w+" "+h+'" fill="#10b310" />'),r.push('<polygon points="'+d+" "+x+" "+w+" "+h+'" fill="#015801" />'),i='<polygon points="'+p+" "+y+" "+h+" "+d+'" ';break;case"rect":case"rectcor":var F=10,E=3;n&&(F=15,c-=2.5,u-=2.5,E=5),i='<rect x="'+c+'" y="'+u+'" width="'+F+'" height="'+F+'" '+("rectcor"==e?' rx="'+E+'" ry="'+E+'" ':"");break;case"circle":E=4;n&&(E=7),i='<circle cx="'+s+'" cy="'+g+'" r="'+E+'"';break;case"rhombus":var T=6;n&&(T=9),i='<polygon points="'+(p=s+","+(g-T))+" "+(y=s+T+","+g)+" "+(d=s+","+(g+T))+" "+(h=s-T+","+g)+'"'}var A=v;return(o||t)&&(A=function(r,e,n){if(r&&e*n!=0&&15!=e&&15!=n)return v;var t=["red","orange","yellow","green","cyan","blue","purple"],o=t[((e+1)*n+f)%t.length];return f++,o}(o,l,a)),i+' fill="'+A+'" />'}m.push('<rect x="'+b+'" y="'+b+'" width="180" height="180" '+w+' fill="'+u+'" />');for(var F=0;F<16;F++)for(var E=0;E<16;E++){a[16*F+E]&&m.push(x(m,s,g,y,d,F,E))}var T="",A="";if(h){T='style="transform: scale(0.66666666667); transform-origin: center;"',A="<g>";var B=["#041B2D","#004E9A","#8A5082","#6F5F90","#8A5082","#FF7B89","#F7D6E0","#E5C1CD","#EFF7F6","#F3DBCF","#AAC9CE","#F2B5D4","#7BDFF2","#85CBCC","#F9E2AE","#daad7b"],C=200,k=[0,200][l[31]%2],S=[0,200][l[30]%2];function D(r,e){return'<ellipse cx="'+k+'" cy="'+S+'" rx="'+r+'" ry="'+r+'" fill="'+e+'"/>'}for(var F in B=l[29]%2?B:B.reverse()){A+=D(C=200-7*F,B[F])}A+=D(C-=7,u)+"</g>"}var I=null;d&&(I="part"),y&&(I="full");var R=t?180:200;return h&&(n="#fff"),['<svg class="dvhip9" version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+R+" "+R+'" width="'+e+'" height="'+e+'" style="background: '+(h?u:"none")+';">'+A+"<g "+T+">"+m.join("")+"</g></svg>",{gene:l,points:a,background:u,lifecolor:v,colorful:I,irregular:h}]}function StartPlayLifeGame(r,e,n,t,o){"none"==e.background&&(e.background=null);var l=256*n,a="width:"+l+"px; height:"+l+"px; ",i=e.background||o||"#000";r.innerHTML='<canvas class="lgcvs" id="lgcvs" width="'+l+'" height="'+l+'" style="'+a+'"></canvas><div id="lgret"></div>',console.log(e);var c=function(r,n){var t=["red","orange","yellow","green","cyan","blue","purple"];return e.colorful&&("part"!=e.colorful||r<85||r>170||n<85||n>170)?(rtcl=t[(r*n+r+n)%t.length],rtcl):e.lifecolor},f=document.getElementById("lgcvs").getContext("2d"),u=document.getElementById("lgret"),v=256,s=[];!function(){for(var r=[],n=0;n<v;n++)r.push(new Array(256));for(n=0;n<16;n++)for(var t=0;t<16;t++){var o=16*n+t;r[120+n][120+t]=e.points[o]}s=r}();var g={},p=0,y=0;function d(){f.fillStyle=i,console.log(i),f.fillRect(0,0,v*n,v*n)}function h(r){f.fillStyle=c(1,1);for(var e=0,t=0;t<v;t++)for(var o=r[t],l=t*n,a=0;a<v;a++){if(o[a]){e+=1;var i=t+","+a;g[i]?g[i]+=1:(g[i]=1,p+=1);var u=a*n;f.fillStyle=c(t,a),f.fillRect(l,u,n,n)}}return[e,p]}function b(r,e,n,t){for(var o=e-1,l=n-1,a=0,i=o;i<o+3;i++)if(!(i<0||i>=t))for(var c=l;c<l+3;c++)c<0||c>=t||i==e&&c==n||r[i][c]&&a++;return a}d(),h(s);var m=!1,w=null,x=0;function F(){s=function(r){for(var e=[],n=0;n<v;n++)e.push(new Array(256));for(n=0;n<v;n++)for(var t=0;t<v;t++){var o=r[n][t],l=b(r,n,t,v),a=0;(3==l||o&&2==l)&&(a=1),e[n][t]=a}return e}(s),d();var r=h(s),e=w;if(e&&e[0]==r[0]&&e[1]==r[1]?x+=1:x=0,x>=10)return m=!0,clearTimeout(E),void function(){m=!0,clearTimeout(E);for(var r=0,e=0;e<v;e++)for(var t=0;t<v;t++){var o=0==e||e==v-1||0==t||t==v-1,l=s[e][t];l&&o&&(r+=1)}areacounts=function(r){f.fillStyle="#088";var e=0,t=0;for(var o in r){var l=r[o];t+=l,e++;var a=o.split(","),i=parseInt(a[0]),c=parseInt(a[1]),u=n;(l+=25)>255&&(l=255),f.fillStyle="rgb("+l+",25,25)",f.fillRect(i*u,c*u,u,u)}return[t,e]}(g),lifecounts=h(s),u.innerText="Vitality: "+areacounts[0]+", Territory: "+areacounts[1]+", Times: "+y+", Living: "+lifecounts[0]+", Expedition: "+r,u.style.opacity=1}();w=r}var E=null;E=setTimeout(function r(){m||(y+=1,F(),E=setTimeout(r,t))},1e3)}